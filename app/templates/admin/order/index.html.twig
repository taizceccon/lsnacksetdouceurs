{% extends 'base.html.twig' %}

{% block title %} Admin - Commandes Douceurs de Leila{% endblock %}

{% block meta %}
  <meta name="description" content="Découvrez nos snacks faits maison, sucrés et salés, livrés avec soin.">
  <meta property="og:title" content="Snacks Artisanaux - Leila" />
{% endblock %}

{% block body %}


<section class="max-w-7xl mx-auto px-6 py-12">
    <header class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-10">
        <h1 class="text-4xl font-extrabold text-gray-900 dark:text-white mb-4 sm:mb-0">
            Tableau de bord administrateur
        </h1>
        <p class="text-gray-600 dark:text-gray-300 text-lg">
            Bienvenue sur votre tableau de bord administrateur !
        </p>
    </header>

    <section class="bg-white dark:bg-[#1f1f1f] shadow-lg rounded-lg p-8">
        <h2 class="text-2xl font-bold text-center text-gray-800 dark:text-gray-100 mb-8">
            Liste des commandes effectuées sur le site
        </h2>

        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                <thead class="bg-rose-500">
                    <tr>
                        <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-white uppercase tracking-wider">ID</th>
                        <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-white uppercase tracking-wider">Client</th>
                        <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-white uppercase tracking-wider">Total</th>
                        <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-white uppercase tracking-wider">Date</th>
                        <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-white uppercase tracking-wider">Status</th>
                        <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-white uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-[#2c2c2c] divide-y divide-gray-200 dark:divide-gray-700">
                    {% for order in orders %}
                        <tr class="hover:bg-rose-100 dark:hover:bg-[#3a3a3a] transition">
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200">{{ order.id }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">{{ order.user.email }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-emerald-600 dark:text-emerald-400">{{ order.totalInEuros|number_format(2, ',', ' ') }} €</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">{{ order.createdAt|date('d/m/Y H:i') }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                {% set statusColors = {                                    
                                    'En cours': 'bg-yellow-400 text-gray-900',
                                    'Reçu': 'bg-blue-500 text-white',
                                    'Envoyé': 'bg-indigo-500 text-white',
                                    'Validé': 'bg-green-600 text-white',
                                    'Refusé': 'bg-red-600 text-white'
                                } %}
                                <span class="inline-flex px-3 py-1 rounded-full text-xs font-semibold {{ statusColors[order.status]|default('bg-gray-300 text-gray-800') }}">
                                    {{ order.status }}
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <a href="{{ path('admin_order_show', {'id': order.id}) }}" class="text-blue-600 hover:text-blue-800 mr-4">Voir</a>
                                <a href="{{ path('admin_order_show', {'id': order.id}) }}" class="text-green-600 hover:text-green-800">Modifier</a>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="6" class="px-6 py-4 text-center text-gray-500 dark:text-gray-400">
                                Aucune commande trouvée.
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>
</section>

{% endblock %}